#!/usr/bin/python
# -*- coding: UTF-8 -*-

import os
import readline

persistent_history = os.path.join(
  os.path.expanduser('~'),
  '.lemming_history')

common_phrases = {
    '1': '%s - skopiuj',
    '2': '%s - przełącz na kopię',
    '3': '%s - usuń oryginał',
}

def expand_phrase(message):
    first = message[0]
    if first in common_phrases:
        wynik = common_phrases[first] % message[1:]
    else:
        wynik = message
    return wynik

def main():
    readline.set_history_length(10000)
    if os.path.isfile(persistent_history):
        readline.read_history_file(persistent_history)
    while 1:
        message = raw_input('Commit message: ')
        if message:
            message = expand_phrase(message)
            polecenie = 'git commit -m "%s"' % message
            os.system(polecenie)
        else:
            print 'Empty string - end of work'
            break
    readline.write_history_file(persistent_history)

if __name__ == '__main__':
    main()
